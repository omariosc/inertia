<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: staff/employee/EmployeeCreateBooking.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: staff/employee/EmployeeCreateBooking.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/* Purpose of file: Allow a staff member to create a booking
for an unregistered user */

import React, {useEffect, useState} from 'react';
import {useNavigate} from 'react-router-dom';
import {Button, Col, Container, Form, Row} from 'react-bootstrap';
import {MapContainer, Marker, Popup, TileLayer} from 'react-leaflet';
import {NotificationManager} from 'react-notifications';
import {useAccount} from '../../authorize';
import host from '../../host';

/**
 * Renders the employee create guest booking page which allows a staff
 * member to create a booking for an unregistered user
 * @return {JSX.Element} Employee create guest booking page
 */
export default function EmployeeCreateGuestBooking() {
  const [account] = useAccount();
  const navigate = useNavigate();
  const [mapLocations, setMapLocations] = useState('');
  const [scooters, setScooters] = useState('');
  const [name, setName] = useState('');
  const [email, setEmail] = useState('');
  const [confirmEmail, setConfirmEmail] = useState('');
  const [hireOptions, setHireOptions] = useState('');
  const [hireChoiceId, setHireChoiceId] = useState('');
  const [startDate, setStartDate] = useState('');
  const [startTime, setStartTime] = useState('');
  const [price, setPrice] = useState('');
  const [depotChoiceId, setDepotChoiceId] = useState('');
  const [scooterChoiceId, setScooterChoiceId] = useState('');
  const [cardNo, setCardNo] = useState('');
  const [expiry, setExpiry] = useState('');
  const [cvv, setCVV] = useState('');
  const [validName, setValidName] = useState(true);
  const [validEmail, setValidEmail] = useState(true);
  const [validConfirm, setValidConfirm] = useState(true);
  const [validDepot, setValidDepot] = useState(true);
  const [validScooter, setValidScooter] = useState(true);
  const [validHireSlot, setValidHireSlot] = useState(true);
  const [validStartDate, setValidStartDate] = useState(true);
  const [validStartTime, setValidStartTime] = useState(true);
  const [validCardNo, setValidCardNo] = useState(true);
  const [validExpDate, setValidExpDate] = useState(true);
  const [validCVV, setValidCVV] = useState(true);

  useEffect(() => {
    fetchHirePeriods();
    fetchLocations();
  }, []);

  useEffect(() => {
    fetchAvailableScooters();
  }, [startTime, startDate, hireChoiceId, depotChoiceId]);

  /**
   * Gets list of available locations from backend server
   */
  async function fetchLocations() {
    try {
      const request = await fetch(host + 'api/Depos', {
        method: 'GET',
        headers: {
          'Content-Type': 'application/json',
          'Accept': 'application/json',
        },
        mode: 'cors',
      });
      setMapLocations(await request.json());
    } catch (e) {
      console.log(e);
    }
  }

  /**
   * Calculates the start time of the new booking
   * @return {string} booking start time in ISO format
   */
  function calcStartIso() {
    const hours = parseInt(startTime.slice(0, 2));
    const mins = parseInt(startTime.slice(3, 5));
    const bookingStart = new Date(startDate);
    bookingStart.setHours(hours, mins, 0, 0);
    return bookingStart.toISOString();
  }

  /**
   * Calculates the end time of the new booking
   * @return {string} booking end time in ISO format
   */
  function calcEndIso() {
    const hours = parseInt(startTime.slice(0, 2));
    const mins = parseInt(startTime.slice(3, 5));
    const bookingEnd = new Date(startDate);
    const duration = hireOptions.find(
        (x) => x.hireOptionId === parseInt(hireChoiceId)).durationInHours;
    bookingEnd.setHours(hours + duration, mins, 0, 0);
    return bookingEnd.toISOString();
  }

  /**
   * Gets list of available scooters for the order from the backend server
   */
  async function fetchAvailableScooters() {
    let valid = true;
    const validateFuncs = [
      validateTime,
      validateDate,
      validateDepot,
      validateHireSlot];
    validateFuncs.forEach((validateTerm) => {
      if (valid) {
        valid = validateTerm(false);
      } else {
        validateTerm(false);
      }
    });
    if (valid) {
      try {
        const requestString = host + 'api/Scooters/available/' + '?depoId=' +
            depotChoiceId + '&amp;startTime=' + calcStartIso() + '&amp;endTime=' +
            calcEndIso();
        const request = await fetch(requestString, {
          method: 'GET',
          headers: {
            'Content-Type': 'application/json',
            'Accept': 'application/json',
            'Authorization': `Bearer ${account.accessToken}`,
          },
          mode: 'cors',
        });
        setScooters((await request.json()).sort(
            (a, b) => a.softScooterId - b.softScooterId));
      } catch (error) {
        console.error(error);
      }
    } else {
      setScooters('');
      setScooterChoiceId('');
    }
  }

  /**
   * Gets list of available hire lengths for the order from the backend server
   */
  async function fetchHirePeriods() {
    try {
      const request = await fetch(host + 'api/HireOptions', {
        method: 'GET',
        headers: {
          'Content-Type': 'application/json',
          'Accept': 'application/json',
          'Authorization': `Bearer ${account.accessToken}`,
        },
        mode: 'cors',
      });
      setHireOptions((await request.json()).sort((a, b) => a.cost - b.cost));
    } catch (error) {
      console.error(error);
    }
  }

  /**
   * Checks that the provided name for the order is valid
   * @param {boolean} stateChange Dynamically updates UI if true
   * @return {boolean} True if valid, false otherwise
   */
  function validateName(stateChange) {
    const valid = name.length > 0;
    if (stateChange) {
      setValidName(valid);
    }
    return valid;
  }

  /**
   * Checks that the provided email for the order is valid
   * @param {boolean} stateChange Dynamically updates UI if true
   * @return {boolean} True if valid, false otherwise
   */
  function validateEmail(stateChange) {
    const valid = email.match(
        // eslint-disable-next-line max-len
        /^(([^&lt;>()[\]\\.,;:\s@"]+(\.[^&lt;>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/);
    if (stateChange) {
      setValidEmail(valid);
    }
    return valid;
  }

  /**
   * Checks that the provided "confirm email" field for the order is valid
   * @param {boolean} stateChange Dynamically updates UI if true
   * @return {boolean} True if valid, false otherwise
   */
  function validateConfirm(stateChange) {
    const valid = email === confirmEmail;
    if (stateChange) {
      setValidConfirm(valid);
    }
    return valid;
  }

  /**
   * Checks that the date of the new order is valid
   * @param {boolean} stateChange Dynamically updates UI if true
   * @return {boolean} True if valid, false otherwise
   */
  function validateDate(stateChange) {
    const currentDate = new Date();
    const dStartDate = new Date(startDate);
    currentDate.setHours(0, 0, 0, 0);
    dStartDate.setHours(0, 0, 0, 0);
    const valid = currentDate.toString() !== 'Invalid Date' &amp;&amp; currentDate &lt;=
        dStartDate;
    if (stateChange) {
      setValidStartDate(valid);
    }
    return valid;
  }

  /**
   * Checks that the time of the new order is valid
   * @param {boolean} stateChange Dynamically updates UI if true
   * @return {boolean} True if valid, false otherwise
   */
  function validateTime(stateChange) {
    let valid;
    if (startTime.length !== 5) {
      valid = false;
    } else {
      const hours = parseInt(startTime.slice(0, 2));
      const mins = parseInt(startTime.slice(3, 5));
      if (hours &lt; 0 || hours > 23 || mins % 15 !== 0) {
        valid = false;
      } else {
        const currentDate = new Date();
        const dStartDate = new Date(startDate);
        currentDate.setSeconds(0, 0);
        dStartDate.setHours(hours, mins, 0, 0);
        valid = currentDate.toString() !== 'Invalid Date' &amp;&amp; currentDate &lt;=
            dStartDate;
      }
    }
    if (stateChange) {
      setValidStartTime(valid);
    }
    return valid;
  }

  /**
   * Checks that the depot of the new order is valid
   * @param {boolean} stateChange Dynamically updates UI if true
   * @return {boolean} True if valid, false otherwise
   */
  function validateDepot(stateChange) {
    const valid = depotChoiceId !== '' &amp;&amp; depotChoiceId !== 'none';
    if (stateChange) {
      setValidDepot(valid);
    }
    return valid;
  }

  /**
   * Checks that the chosen scooter for the new order is valid
   * @param {boolean} stateChange Dynamically updates UI if true
   * @return {boolean} True if valid, false otherwise
   */
  function validateScooter(stateChange) {
    const valid = scooterChoiceId !== '' &amp;&amp; scooterChoiceId !== 'none';
    if (stateChange) {
      setValidScooter(valid);
    }
    return valid;
  }

  /**
   * Checks that the hiring length of the order is valid
   * @param {boolean} stateChange Dynamically updates UI if true
   * @return {boolean} True if valid, false otherwise
   */
  function validateHireSlot(stateChange) {
    const valid = hireChoiceId !== '' &amp;&amp; hireChoiceId !== 'none';
    if (stateChange) {
      setValidHireSlot(valid);
    }
    return valid;
  }

  /**
   * Checks that the card number of the new order is valid
   * @param {boolean} stateChange Dynamically updates UI if true
   * @return {boolean} True if valid, false otherwise
   */
  function validateCardNo(stateChange) {
    const valid = cardNo.length > 9 &amp;&amp; cardNo.length &lt; 20;
    if (stateChange) {
      setValidCardNo(valid);
    }
    return valid;
  }

  /**
   * Checks that the expiry date of the card of the new order is valid
   * @param {boolean} stateChange Dynamically updates UI if true
   * @return {boolean} True if valid, false otherwise
   */
  function validateExpDate(stateChange) {
    const valid = expiry.match(/^(0[1-9]|1[0-2])\/?([0-9]{4}|[0-9]{2})$/);
    if (stateChange) {
      setValidExpDate(valid);
    }
    return valid;
  }

  /**
   * Checks that the CVV of the card of the new order is valid
   * @param {boolean} stateChange Dynamically updates UI if true
   * @return {boolean} True if valid, false otherwise
   */
  function validateCVV(stateChange) {
    const valid = cvv.match(/^[0-9]{3,4}$/);
    if (stateChange) {
      setValidCVV(valid);
    }
    return valid;
  }

  /**
   * If all validations are passed and booking can be made, creates the booking
   * and updates the backend server
   */
  async function createGuestBooking() {
    let valid = true;
    const validateFuncs = [
      validateName,
      validateEmail,
      validateConfirm,
      validateTime,
      validateDate,
      validateDepot,
      validateScooter,
      validateHireSlot,
      validateCardNo,
      validateCVV,
      validateExpDate];
    validateFuncs.forEach((validateTerm) => {
      if (valid) {
        valid = validateTerm(true);
      } else {
        validateTerm(true);
      }
    });
    if (!valid) {
      NotificationManager.error('Invalid Details Provided', 'Error');
    } else {
      try {
        const request = await fetch(host + 'api/admin/Orders/CreateGuestOrder',
            {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
                'Accept': 'application/json',
                'Authorization': `Bearer ${account.accessToken}`,
              },
              body: JSON.stringify({
                'email': email,
                'name': name,
                'hireOptionId': parseInt(hireChoiceId),
                'scooterId': parseInt(scooterChoiceId),
                'startTime': new Date(Date.now()).toISOString(),
              }),
              mode: 'cors',
            });
        const response = await request;
        if (response.status === 200) {
          NotificationManager.success('Created guest booking.', 'Success');
          navigate('/bookings');
        } else if (response.status === 422) {
          const message = await response.json();
          if (message.errorCode === 10) {
            NotificationManager.error(
                'Email provided is already associated with an account.',
                'Error');
          } else {
            NotificationManager.error('Scooter is currently unavailable.',
                'Error');
          }
        } else {
          NotificationManager.error('Could not create booking.', 'Error');
        }
      } catch (e) {
        console.log(e);
      }
      await fetchAvailableScooters();
    }
  }

  return (
    &lt;>
      &lt;p id="breadcrumb">
        &lt;a className="breadcrumb-list" onClick={() => {
          navigate('/home');
        }}>Home
        &lt;/a> &amp;gt; &lt;a className="breadcrumb-list" onClick={() => {
          navigate('/bookings');
        }}>Bookings&lt;/a> &amp;gt; &lt;b>
          &lt;a className="breadcrumb-current" onClick={() => {
            navigate('/create-guest-booking');
          }}>Create Booking&lt;/a>&lt;/b>
      &lt;/p>
      &lt;h3 id="pageName">Create Booking&lt;/h3>
      &lt;hr id="underline"/>
      &lt;Container className="pb-4">
        &lt;div className="booking-responsive">
          &lt;Row>
            &lt;Col className="col-6">
              &lt;Container className="autoScrollSub">
                &lt;h5>Customer Details&lt;/h5>
                &lt;Row className="pb-2 small-padding-top">
                  &lt;Col className="col-5 text-end align-self-center">
                      Name:
                  &lt;/Col>
                  &lt;Col className="text-end">
                    &lt;Form.Control type="text" placeholder="John Smith"
                      isInvalid={!validName}
                      onInput={(e) => setName(e.target.value)}/>
                    &lt;Form.Control.Feedback type="invalid">
                        Enter Customer Name
                    &lt;/Form.Control.Feedback>
                  &lt;/Col>
                &lt;/Row>
                &lt;Row className="pb-2">
                  &lt;Col className="col-5 text-end align-self-center">
                      Email Address:
                  &lt;/Col>
                  &lt;Col className="text-end">
                    &lt;Form.Control type="email" placeholder="name@example.com"
                      isInvalid={!validEmail}
                      onInput={(e) => setEmail(e.target.value)}/>
                    &lt;Form.Control.Feedback type="invalid">
                        Invalid Email Address
                    &lt;/Form.Control.Feedback>
                  &lt;/Col>
                &lt;/Row>
                &lt;Row className="pb-2">
                  &lt;Col className="col-5 text-end align-self-center">Confirm
                      Email Address&lt;/Col>
                  &lt;Col className="text-end">
                    &lt;Form.Control type="email" placeholder="name@example.com"
                      isInvalid={!validConfirm}
                      onInput={(e) => setConfirmEmail(
                          e.target.value)}/>
                    &lt;Form.Control.Feedback type="invalid">
                        Email Address Does Not Match
                    &lt;/Form.Control.Feedback>
                  &lt;/Col>
                &lt;/Row>
                &lt;h5>Booking Details&lt;/h5>
                &lt;Row className="pb-2">
                  &lt;Col className="col-5 text-end align-self-center">
                      Depot:
                  &lt;/Col>
                  &lt;Col>
                    {(mapLocations === '') ? &lt;> Loading depots... &lt;/> :
                          &lt;Form.Select value={depotChoiceId}
                            isInvalid={!validDepot}
                            onChange={(e) => {
                              setDepotChoiceId(e.target.value);
                              setScooterChoiceId('');
                            }}>
                            &lt;option value="" key="none" disabled hidden>Select
                              Depot
                            &lt;/option>
                            {mapLocations.map((depot, idx) => (
                              &lt;option value={depot.depoId}
                                key={idx}>{depot.name}&lt;/option>
                            ))}
                          &lt;/Form.Select>
                    }
                  &lt;/Col>
                &lt;/Row>
                &lt;Row className="pb-2">
                  &lt;Col className="col-5 text-end align-self-center">
                      Start Date:
                  &lt;/Col>
                  &lt;Col>
                    &lt;Form.Control type="date" isInvalid={!validStartDate}
                      onChange={(e) => {
                        setStartDate(e.target.value);
                      }}/>
                  &lt;/Col>
                &lt;/Row>
                &lt;Row className="pb-2">
                  &lt;Col className="col-5 text-end align-self-center">
                      Start Time:
                  &lt;/Col>
                  &lt;Col>
                    &lt;Form.Control type="time"
                      isInvalid={!validStartTime}
                      value={startTime}
                      onChange={(e) => {
                        let output = e.target.value.slice(0, 3);
                        let minutes = parseInt(
                            e.target.value.slice(3, 5));
                        if (minutes % 15 === 1) {
                          minutes = (minutes + 14) % 60;
                        } else if (minutes % 15 === 14) {
                          minutes = (minutes - 14);
                        } else if (minutes % 15 !== 0) {
                          minutes = (Math.round(minutes / 15) %
                                            4) * 15;
                        }
                        const minString = minutes.toString();
                        if (minString.length === 1) {
                          output += '0' + minString;
                        } else {
                          output += minString;
                        }
                        setStartTime(output);
                      }
                      }/>
                  &lt;/Col>
                &lt;/Row>
                &lt;Row className="pb-2">
                  &lt;Col className="col-5 text-end align-self-center">
                      Hire Period:
                  &lt;/Col>
                  &lt;Col>
                    {(hireOptions === '') ? &lt;>Loading hire periods...&lt;/> : &lt;>
                      &lt;Form.Select isInvalid={!validHireSlot}
                        defaultValue="none"
                        onChange={(e) => {
                          const value = e.target.value.split(',');
                          setHireChoiceId(value[0]);
                          setPrice(value[1]);
                        }}>

                        &lt;option value="none" key="none" disabled hidden>
                            Select Hire Period
                        &lt;/option>
                        {hireOptions.map((option, idx) => (
                          &lt;option key={idx}
                            value={[
                              option.hireOptionId,
                              option.cost]}>{option.name} -
                                £{option.cost}&lt;/option>
                        ))}
                      &lt;/Form.Select>
                    &lt;/>
                    }
                  &lt;/Col>
                &lt;/Row>
                &lt;Row className="pb-2">
                  &lt;Col className="col-5 text-end align-self-center">
                      Scooter:
                  &lt;/Col>
                  &lt;Col>

                    &lt;Form.Select
                      value={scooterChoiceId}
                      isInvalid={!validScooter}
                      disabled={scooters === ''}
                      onChange={(e) => {
                        setScooterChoiceId(e.target.value);
                      }}>
                      {scooters === '' ?
                            &lt;option value="" key="none" disabled hidden>Please
                              fill in other
                              details&lt;/option> : &lt;>
                              &lt;option value="" key="none" disabled hidden>Select
                                Scooter
                              &lt;/option>
                              {scooters.map((scooter, idx) => (
                                &lt;option value={scooter.scooterId}
                                  key={idx}>{scooter.softScooterId}&lt;/option>
                              ))}
                            &lt;/>
                      }
                    &lt;/Form.Select>

                  &lt;/Col>
                &lt;/Row>
                {price === '' ?
                      null :
                      &lt;h5>Cost: £{parseFloat(price).toFixed(2)}&lt;/h5>}
                &lt;h5>Payment details&lt;/h5>
                &lt;Row className="pb-2 small-padding-top">
                  &lt;Col className="col-5 text-end align-self-center">
                      Card Number:
                  &lt;/Col>
                  &lt;Col className="text-end">
                    &lt;Form.Control type="text"
                      placeholder="4000-1234-5678-9010"
                      isInvalid={!validCardNo}
                      onInput={(e) => setCardNo(e.target.value)}/>
                    &lt;Form.Control.Feedback type="invalid">
                        Invalid Card Number
                    &lt;/Form.Control.Feedback>
                  &lt;/Col>
                &lt;/Row>
                &lt;Row className="pb-2">
                  &lt;Col className="col-5 text-end align-self-center">
                      Expiry Date:
                  &lt;/Col>
                  &lt;Col className="text-end">
                    &lt;Form.Control type="text" placeholder="MM/YY"
                      isInvalid={!validExpDate}
                      onInput={(e) => setExpiry(e.target.value)}/>
                    &lt;Form.Control.Feedback type="invalid">
                        Invalid Expiry Date
                    &lt;/Form.Control.Feedback>
                  &lt;/Col>
                &lt;/Row>
                &lt;Row className="pb-2">
                  &lt;Col className="col-5 text-end align-self-center">
                      CVV:
                  &lt;/Col>
                  &lt;Col className="text-end">
                    &lt;Form.Control type="text" placeholder="123"
                      isInvalid={!validCVV}
                      onInput={(e) => setCVV(e.target.value)}/>
                    &lt;Form.Control.Feedback type="invalid">
                        Invalid CVV
                    &lt;/Form.Control.Feedback>
                  &lt;/Col>
                &lt;/Row>
              &lt;/Container>
            &lt;/Col>
            &lt;Col className="box-staff">
              {(mapLocations === '') ? &lt;p>Loading map locations...&lt;/p> :
                    &lt;MapContainer center={[
                      mapLocations[0].latitude,
                      mapLocations[0].longitude]} zoom={15}
                    zoomControl={false} className="minimap-guest">
                      &lt;TileLayer
                        attribution='&amp;copy; &lt;a href="http://osm.org/copyright">OpenStreetMap&lt;/a> contributors'
                        url="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"/>
                      {mapLocations.map((location, index) => (
                        &lt;Marker key={index}
                          position={[
                            location.latitude,
                            location.longitude]}
                          eventHandlers={{
                            click: () => {
                              setDepotChoiceId(location.depoId);
                              setScooterChoiceId('');
                            },
                          }}>
                          &lt;Popup>
                            &lt;Button className="disabled">
                              {location.name}
                            &lt;/Button>
                          &lt;/Popup>
                        &lt;/Marker>
                      ))}
                    &lt;/MapContainer>
              }
            &lt;/Col>
          &lt;/Row>
        &lt;/div>
        &lt;div className="booking-responsive-mobile">
          &lt;h5>Customer Details&lt;/h5>
          &lt;div className="padding-down">
              Name:
            &lt;Form.Control type="text" placeholder="John Smith"
              isInvalid={!validName}
              onInput={(e) => setName(e.target.value)}/>
            &lt;Form.Control.Feedback type="invalid">
                Enter Customer Name
            &lt;/Form.Control.Feedback>
          &lt;/div>
          &lt;div className="padding-down">
              Email Address:
            &lt;Form.Control type="email" placeholder="name@example.com"
              isInvalid={!validEmail}
              onInput={(e) => setEmail(e.target.value)}/>
            &lt;Form.Control.Feedback type="invalid">
                Invalid Email Address
            &lt;/Form.Control.Feedback>
          &lt;/div>
          &lt;div className="padding-down">
              Confirm Email Address
            &lt;Form.Control type="email" placeholder="name@example.com"
              isInvalid={!validConfirm}
              onInput={(e) => setConfirmEmail(e.target.value)}/>
            &lt;Form.Control.Feedback type="invalid">
                Email Address Does Not Match
            &lt;/Form.Control.Feedback>
          &lt;/div>
          &lt;br/>
          &lt;h5>Booking Details&lt;/h5>
          &lt;div className="padding-down">
              Depot:
            {(mapLocations === '') ? &lt;> Loading depots... &lt;/> :
                  &lt;Form.Select value={depotChoiceId} isInvalid={!validDepot}
                    onChange={(e) => {
                      setDepotChoiceId(e.target.value);
                      setScooterChoiceId('');
                    }}>
                    &lt;option value="" key="none" disabled hidden>Select Depot
                    &lt;/option>
                    {mapLocations.map((depot, idx) => (
                      &lt;option value={depot.depoId}
                        key={idx}>{depot.name}&lt;/option>
                    ))}
                  &lt;/Form.Select>
            }
          &lt;/div>
          &lt;div className="padding-down">
              Start Date:
            &lt;Form.Control type="date" isInvalid={!validStartDate}
              onChange={(e) => {
                setStartDate(e.target.value);
              }}/>
          &lt;/div>
          &lt;div className="padding-down">
              Start Time:
            &lt;Form.Control type="time"
              isInvalid={!validStartTime}
              value={startTime}
              onChange={(e) => {
                let output = e.target.value.slice(0, 3);
                let minutes = parseInt(
                    e.target.value.slice(3, 5));
                if (minutes % 15 === 1) {
                  minutes = (minutes + 14) % 60;
                } else if (minutes % 15 === 14) {
                  minutes = (minutes - 14);
                } else if (minutes % 15 !== 0) {
                  minutes = (Math.round(minutes / 15) % 4) * 15;
                }
                const minString = minutes.toString();
                if (minString.length === 1) {
                  output += '0' + minString;
                } else {
                  output += minString;
                }
                setStartTime(output);
              }
              }/>
          &lt;/div>
          &lt;div className="padding-down">
              Hire Period:
            {(hireOptions === '') ? &lt;>Loading hire periods...&lt;/> : &lt;>
              &lt;Form.Select isInvalid={!validHireSlot} defaultValue="none"
                onChange={(e) => {
                  const value = e.target.value.split(',');
                  setHireChoiceId(value[0]);
                  setPrice(value[1]);
                }}>
                &lt;option value="none" key="none" disabled hidden>Select Hire
                    Period
                &lt;/option>
                {hireOptions.map((option, idx) => (
                  &lt;option key={idx} value={[
                    option.hireOptionId,
                    option.cost]}>{option.name} -
                        £{option.cost}&lt;/option>
                ))}
              &lt;/Form.Select>
            &lt;/>
            }
          &lt;/div>
          &lt;div className="padding-down">
              Scooter:
            &lt;Form.Select
              value={scooterChoiceId}
              isInvalid={!validScooter}
              disabled={scooters === ''}
              onChange={(e) => {
                setScooterChoiceId(e.target.value);
              }}>
              {scooters === '' ?
                    &lt;option value="" key="none" disabled hidden>Please fill in
                      other details&lt;/option> : &lt;>
                      &lt;option value="" key="none" disabled hidden>Select
                        Scooter
                      &lt;/option>
                      {scooters.map((scooter, idx) => (
                        &lt;option value={scooter.scooterId}
                          key={idx}>{scooter.softScooterId}&lt;/option>
                      ))}
                    &lt;/>
              }
            &lt;/Form.Select>
          &lt;/div>
          &lt;div className="padding-down">
            {price === '' ?
                  null :
                  &lt;h5>Cost: £{parseFloat(price).toFixed(2)}&lt;/h5>}
          &lt;/div>
          &lt;br/>
          &lt;h5>Payment details&lt;/h5>
          &lt;div className="padding-down">
              Card Number:
            &lt;Form.Control type="text" placeholder="4000-1234-5678-9010"
              isInvalid={!validCardNo}
              onInput={(e) => setCardNo(e.target.value)}/>
            &lt;Form.Control.Feedback type="invalid">
                Invalid Card Number
            &lt;/Form.Control.Feedback>
          &lt;/div>
          &lt;div className="padding-down">
              Expiry Date:
            &lt;Form.Control type="text" placeholder="MM/YY"
              isInvalid={!validExpDate}
              onInput={(e) => setExpiry(e.target.value)}/>
            &lt;Form.Control.Feedback type="invalid">
                Invalid Expiry Date
            &lt;/Form.Control.Feedback>
          &lt;/div>
          &lt;div className="padding-down">
              CVV:
            &lt;Form.Control type="text" placeholder="123"
              isInvalid={!validCVV}
              onInput={(e) => setCVV(e.target.value)}/>
            &lt;Form.Control.Feedback type="invalid">
                Invalid CVV
            &lt;/Form.Control.Feedback>
          &lt;/div>
        &lt;/div>
        &lt;div className="text-center large-padding-top">
          &lt;Button onClick={createGuestBooking}>Confirm Booking&lt;/Button>
        &lt;/div>
      &lt;/Container>
    &lt;/>
  )
  ;
};
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Account.html">Account</a></li></ul><h3>Global</h3><ul><li><a href="global.html#accountFromCookies">accountFromCookies</a></li><li><a href="global.html#AccountProvider">AccountProvider</a></li><li><a href="global.html#signIn">signIn</a></li><li><a href="global.html#signOut">signOut</a></li><li><a href="global.html#useAccount">useAccount</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.10</a> on Sun May 01 2022 22:09:55 GMT+0100 (British Summer Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
